<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.cdnfonts.com/css/latin-modern-roman" rel="stylesheet">
    <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
    <link rel="alternate icon" class="js-site-favicon" type="image/png" href="https://github.githubassets.com/favicons/favicon.png">
    <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <button><span>Welcome</span></button>
    <br>
    <button id="gooey-button">hello</button>
    <br>
    <div>
        <a href="https://wattlecourses.anu.edu.au/my/" target="_blank">Wattle</a>
    </div>
    <br>
    <div>
        <a href="https://piazza.com" target="_blank">Piazza</a>
    </div>
    <br>
    <a>Shanghai - </a><a id="timeCN"></a>
    <br>
    <a>Canberra - </a><a id="timeAUS"></a>
    <br>
    <a>difference in time zone:</a>
    <a id="diffTimeZone">diffTimeZone</a> <a>hours</a>

    <br><br>
    <a href="https://wattlecourses.anu.edu.au/course/view.php?id=38129" target="_blank">COMP4680/COMP8650 - Advanced Topics in Machine Learning - Sem 2 2022</a>
    <br>
    <a href="https://wattlecourses.anu.edu.au/course/view.php?id=38129" target="_blank">Monday Lecture</a> 
    (<a class="timetable" id="Monday-1000-1100"></a>)
    <br>
    <a href="https://wattlecourses.anu.edu.au/course/view.php?id=38129" target="_blank">Tuesday Lecture</a> 
    (<a class="timetable" id="Tuesday-1600-1700"></a>)
    <br>
    <a href="https://anu.zoom.us/j/81387520807?pwd=eGxaenc2ZzZqd2FpMjBCV09TRVNPQT09" target="_blank">Wednesday Tutorial</a>
    (<a class="timetable" id="Wednesday-1100-1200"></a>)

    <br><br>
    <a href="https://wattlecourses.anu.edu.au/course/view.php?id=38128" target="_blank">COMP4650/COMP6490 - Document Analysis - Sem 2 2022</a>
    <br>
    <a href="https://anu.zoom.us/j/81761248876?pwd=by9hS3dDcXhSVXlUMThoV1V4eGdNUT09" target="_blank">Monday Lecture</a> 
    (<a class="timetable" id="Monday-1100-1200"></a>)
    <br>
    <a href="https://anu.zoom.us/j/81761248876?pwd=by9hS3dDcXhSVXlUMThoV1V4eGdNUT09" target="_blank">Tuesday Lecture</a> 
    (<a class="timetable" id="Tuesday-1100-1200"></a>)
    <br>
    <a href="https://anu.zoom.us/j/83821707529?pwd=Z2FDQUJ1UmpHd2lESjRGMDg2YmRRUT09" target="_blank">Thursday Laboratory</a>
    (<a class="timetable" id="Thursday-1600-1800"></a>) 
    
    <br><br>
    <a href="https://wattlecourses.anu.edu.au/course/view.php?id=38111" target="_blank">COMP2610/COMP6261 - Information Theory - Sem 2 2022</a>
    <br>
    <a href="https://anu.zoom.us/j/85401466731?pwd=c1pnQ0wxdnVySFVxZXY0UGFwTXRvdz09" target="_blank">Tuesday Lecture</a> 
    (<a class="timetable" id="Tuesday-1200-1300"></a>)
    <br>
    <a href="https://anu.zoom.us/j/85401466731?pwd=c1pnQ0wxdnVySFVxZXY0UGFwTXRvdz09" target="_blank">Wednesday Lecture</a> 
    (<a class="timetable" id="Wednesday-1200-1300"></a>)
    <br>
    <a href="https://anu.zoom.us/j/85401466731?pwd=c1pnQ0wxdnVySFVxZXY0UGFwTXRvdz09" target="_blank">Tuesday Tutorial</a>
    (<a class="timetable" id="Tuesday-1400-1500"></a>)
    
    <br><br>
    <a href="https://wattlecourses.anu.edu.au/course/view.php?id=39696" target="_blank">COMP3500/COMP3550/COMP4500/COMP4810/COMP8715 - Software Engineering Project - Sem 1 2023</a>
    <br>
    <a href="https://anu.zoom.us/j/84566671941?pwd=Ly9CKzFqQkxrdFpqQWlJNERLRmVtUT09" target="_blank">Tuesday Lecture (variable link & schedule)</a> 
    (<a class="timetable" id="Tuesday-1200-1400"></a>)
    <br>
    <a href="https://anu.zoom.us/j/89439474527?pwd=Y3o4TWl6bERlOVhZMmRCWmY4bTE4Zz09" target="_blank">Wednesday Tutorial</a>
    (<a class="timetable" id="Wednesday-0800-1000"></a>)
    <br>
    <a href="https://teams.microsoft.com/l/chat/0/0?users=username%40domain.com" target="_blank">Wednesday Client Meeting</a>
    (<a class="timetable" id="Wednesday-1000-1100"></a>)
    <br>
    <a href="https://anu.zoom.us/j/84566671941?pwd=Ly9CKzFqQkxrdFpqQWlJNERLRmVtUT09" target="_blank">Thursday Workshop (variable link & schedule)</a>
    (<a class="timetable" id="Thursday-1700-2100"></a>)
    <br>
    <a href="https://teams.microsoft.com/l/chat/0/0?users=username%40domain.com" target="_blank">Sunday Team Meeting</a>
    (<a class="timetable" id="Sunday-1300-1500"></a>)
    
    <!-- password example -->
    <!-- <a>password: </a><a onclick="copyText(this)">password</a> -->

    <script>
    window.addEventListener("load", initPage, true); function initPage() {
        startTime();
        writeTimetable();
        highlight();
    }

    function decodeHTML(html) {
        var txt = document.createElement("textarea");
        txt.innerHTML = html;
        return txt.value;
    }

    function copyText(element) {
        var trueText = decodeHTML(element.innerHTML);
        console.log(trueText);
        navigator.clipboard.writeText(trueText);
        alert("copied : " + trueText);
    }

    function getOffsetBetweenTimezonesForDate(date, timezoneX, timezoneY) {
        const timezoneXDate = convertDateToAnotherTimeZone(date, timezoneX);
        const timezoneYDate = convertDateToAnotherTimeZone(date, timezoneY);
        return timezoneXDate.getTime() - timezoneYDate.getTime();
    }
      
    function convertDateToAnotherTimeZone(date, timezone) {
        const dateString = date.toLocaleString('en-US', {
          timeZone: timezone
        });
        return new Date(dateString);
    }

    function startTime() {
        const today = new Date();
        const h = today.getHours();
        const w = today.toLocaleString("default", { weekday: "long" });
        $("#timeCN").html(today.toLocaleString('en-US', {
          timeZone: 'Asia/Shanghai'
        }) + " | " + w + " " + h + ":00");
        $("#timeAUS").html(today.toLocaleString('en-US', {
          timeZone: 'Australia/Canberra'
        }) + " | " + w + " " + (h - offsetHour) + ":00");
        setTimeout(startTime, 1000);
    }
    
    let offset = getOffsetBetweenTimezonesForDate(new Date(), 'Asia/Shanghai', 'Australia/Canberra');
    let offsetHour = offset / 3600000;
    $("#diffTimeZone").html(offsetHour);

    function weekdayToNumber(weekday) {
        switch (weekday) {
            case "Monday": return 1;
            case "Tuesday": return 2;
            case "Wednesday": return 3;
            case "Thursday": return 4;
            case "Friday": return 5;
            case "Saturday": return 6;
            case "Sunday": return 7;
        }
    }

    function parseTime(timeString) {
        return (parseInt(timeString.substring(0, 2), 10) + offsetHour) + ":" + timeString.slice(-2);
    }

    function writeTimetable() {
        var timetables = $(".timetable");
        for (var timetable of timetables) {
            var time = $(timetable).attr('id');
            var list = time.split("-");
            $(timetable).html(list[0] + " " + parseTime(list[1]) + " - " + list[0] + " " + parseTime(list[2]));
        }
    }

    function highlight() {
        const today = new Date();
        const w = today.getDay();
        const h = today.getHours();
        const m = today.getMinutes();
        const numberTime = parseInt(h, 10) * 100 + parseInt(m, 10);  
        var timetables = $(".timetable");

        for (var timetable of timetables) {
            var time = $(timetable).attr('id');
            var list = time.split("-");
            if (weekdayToNumber(list[0]) == w) {
                $(timetable).css("color", "yellow");
                const start = parseInt(list[1], 10) + offsetHour * 100;
                const end = parseInt(list[2], 10) + offsetHour * 100;
                if (start < numberTime && numberTime < end) {
                    $(timetable).css("color", "pink");
                }
                if (end < numberTime) {
                    $(timetable).css("color", "green");
                }
            }
        }

        setTimeout(highlight, 60000);
    }
</script>
</body>
</html>